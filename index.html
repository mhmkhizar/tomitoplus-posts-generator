<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Website Post Generator</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#121212;color:#e0e0e0;line-height:1.6;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:2rem}
    .container{background:#1f1f1f;padding:2.5rem;border-radius:1rem;box-shadow:0 8px 32px rgba(0,0,0,.3);max-width:800px;width:100%;margin:1rem}
    h1{font-size:2rem;margin-bottom:2rem;color:#fff;text-align:center}
    form{display:flex;flex-direction:column;gap:1.25rem;margin-bottom:2rem}
    input{width:100%;padding:.875rem 1rem;border-radius:.5rem;border:2px solid #404040;background:#2d2d2d;color:#e0e0e0;font-size:1rem;transition:all .2s ease}
    input:focus{border-color:#1ce783;box-shadow:0 0 0 2px rgba(28,231,131,.2);outline:none}
    input:invalid{border-color:#f44}
    input::placeholder{color:#888}
    button{padding:1rem 1.5rem;background:#1ce783;color:#121212;border:none;border-radius:.5rem;cursor:pointer;font-size:1rem;font-weight:600;transition:all .2s ease;margin-top:.5rem}
    button:hover{background:#19d074;transform:translateY(-1px)}
    button:active{transform:translateY(0)}
    .result{display:none;background:#2d2d2d;border-radius:.75rem;padding:1.5rem;margin-top:2rem}
    .main-section{margin-bottom:2.5rem;padding-bottom:1.5rem}
    .main-section-title{font-size:1.5rem;color:#1ce783;font-weight:700;margin-bottom:1.5rem}
    .section{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #404040}
    .section:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}
    .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
    .section-title{font-size:1.25rem;color:#aaa;font-weight:700}
    .copy-btn{background:none;border:none;color:#aaa;padding:.5rem;margin:0;cursor:pointer;transition:all .3s ease}
    .copy-btn:hover{color:#1ce783;transform:translateY(0)}
    .copy-btn i{font-size:1.125rem}
    .wordpress-code{background:#1a1a1a;padding:1rem;border-radius:.5rem;white-space:pre-wrap;font-family:monospace;overflow-y:auto;max-height:200px;max-width:100%;word-break:break-word}
    .wordpress-code::-webkit-scrollbar{width:8px;height:8px}
    .wordpress-code::-webkit-scrollbar-track{background:#1a1a1a;border-radius:4px}
    .wordpress-code::-webkit-scrollbar-thumb{background:#1ce783;border-radius:4px}
    .wordpress-code::-webkit-scrollbar-thumb:hover{background:#19d074}
    @media (max-width:600px){.container{padding:1.5rem}h1{font-size:1.5rem}}
  </style>
</head>
<body>
  <div class="container">
    <h1>Website Post Generator</h1>
    <form id="generatorForm" onsubmit="fetchMovieInfo(event)">
      <input type="text" id="imdbLink" placeholder="Enter IMDB Link" required autocomplete="off"/>
      <input type="text" id="dubbedLanguages" placeholder="Enter Language(s)" required autocomplete="on"/>
      <input type="text" id="driveFolderID" placeholder="Enter Drive Folder ID" required autocomplete="off"/>
      <button type="submit">Get Post</button>
    </form>

    <div class="result" id="result">
      <div class="main-section">
        <div class="main-section-title">Website Post</div>

        <div class="section">
          <div class="section-header">
            <div class="section-title">Title</div>
            <button class="copy-btn" onclick="copySection('movieTitleYear')"><i class="fas fa-clipboard"></i></button>
          </div>
          <div id="movieTitleYear"></div>
        </div>

        <div class="section">
          <div class="section-header">
            <div class="section-title">Content</div>
            <button class="copy-btn" onclick="copySection('wordpressCode')"><i class="fas fa-clipboard"></i></button>
          </div>
          <div class="wordpress-code" id="wordpressCode"></div>
        </div>

        <div class="section">
          <div class="section-header">
            <div class="section-title">Featured Image URL</div>
            <button class="copy-btn" onclick="copySection('featuredImageUrl')"><i class="fas fa-clipboard"></i></button>
          </div>
          <div class="wordpress-code" id="featuredImageUrl"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const apiKey = "5725af9a";

    async function copySection(id){
      const btn=event.currentTarget, ic=btn.querySelector('i'), txt=document.getElementById(id).innerText;
      try{await navigator.clipboard.writeText(txt);ic.classList.replace('fa-clipboard','fa-check');setTimeout(()=>ic.classList.replace('fa-check','fa-clipboard'),1000)}catch(e){console.error(e)}
    }

    function starBadge(r,v){
      const rating=parseFloat(r)||0, votes=parseInt((v||'0').replace(/[^\d]/g,''))||0;
      if(rating>=8.5 && votes>=100000) return '‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è';
      if(rating>=8.0 && votes>=50000)  return '‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏èüîÜ';
      if(rating>=7.5 && votes>=25000)  return '‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è';
      if(rating>=7.0 && votes>=10000)  return '‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏èüîÜ';
      if(rating>=6.5 && votes>=5000)   return '‚òÄÔ∏è‚òÄÔ∏è‚òÄÔ∏è';
      if(rating>=6.0 && votes>=2000)   return '‚òÄÔ∏è‚òÄÔ∏èüîÜ';
      if(rating>=5.5 && votes>=1000)   return '‚òÄÔ∏è‚òÄÔ∏è';
      if(rating>=5.0 && votes>=500)    return '‚òÄÔ∏èüîÜ';
      if(rating>=4.5 && votes>=100)    return '‚òÄÔ∏è';
      return 'üîÜ';
    }

    function extractId(url){
      const m=url.match(/tt\d{7,}/);
      return m?m[0]:'';
    }

    function generateWordPressCode(data,lang,poster1080,folderId,stars,imdbID){
      return `<!-- wp:image {"sizeSlug":"large","align":"full","className":"alignfull","style":{"border":{"radius":"3px"}}} -->
<figure class="wp-block-image alignfull size-large has-custom-border"><img src="${poster1080}" alt="" style="border-radius:3px"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>${stars}</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>${data.Plot}</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2 class="wp-block-heading">Information</h2>
<!-- /wp:heading -->

<!-- wp:list -->
<ul class="wp-block-list">
<li id="file-id"><strong>ID:</strong> ${folderId}</li>
<li><strong>IMDb ID:</strong> ${imdbID}</li>
<li><strong>Title:</strong> ${data.Title}</li>
<li><strong>Type:</strong> Movie</li>
<li><strong>Year:</strong> ${data.Year}</li>
<li><strong>Runtime:</strong> ${data.Runtime}</li>
<li><strong>Genre:</strong> ${data.Genre}</li>
<li><strong>Language(s):</strong> ${lang}</li>
</ul>
<!-- /wp:list -->

<!-- wp:html -->
<div id="file-access-form-container" style="background:#1a1a1a;padding:20px;border-radius:8px;margin-top:64px;box-shadow:0 4px 8px rgba(0,0,0,.5);color:#f0f0f0">
<h3 style="color:#1ce783;margin-top:0">Access this file</h3>
<div id="message" style="margin-bottom:15px"></div>
<div style="margin-bottom:15px"><input id="user-email" style="width:100%;padding:10px;border-radius:4px;background:#2c2c2c;color:#fff" type="email" placeholder="Enter your Gmail address"/></div>
<p id="get-file-para"><button id="get-file-btn" style="width:100%;padding:12px;background:#1ce783;color:#1a1a1a;border:none;border-radius:4px;font-size:16px;font-weight:600;cursor:pointer">Get file</button></p>
</div>
<!-- /wp:html -->`;
    }

    function fetchMovieInfo(e){
      e.preventDefault();
      const rawLink=document.getElementById('imdbLink').value.trim();
      const imdbID=extractId(rawLink);
      if(!imdbID){alert('Could not find a valid IMDb ID in the link.');return}

      const lang=document.getElementById('dubbedLanguages').value.trim();
      const folder=document.getElementById('driveFolderID').value.trim();
      const result=document.getElementById('result');
      result.style.display='none';

      fetch(`https://www.omdbapi.com/?i=${imdbID}&apikey=${apiKey}&plot=full`)
        .then(r=>r.json())
        .then(d=>{
          if(d.Response==='False'){alert('Movie not found. Please check the IMDb link.');return}
          const stars=starBadge(d.imdbRating,d.imdbVotes);
          // Title mein sirf Title (Year) ‚Äî NO stars
          document.getElementById('movieTitleYear').innerText=`${d.Title} (${d.Year})`;
          const poster1080=d.Poster!=='N/A'?d.Poster.replace(/._V1_SX300\./g,'._V1_SX1080.'):'No URL available';
          const poster300=d.Poster!=='N/A'?d.Poster:'No URL available';
          document.getElementById('wordpressCode').innerText=generateWordPressCode(d,lang,poster1080,folder,stars,imdbID);
          document.getElementById('featuredImageUrl').innerText=poster300;
          result.style.display='block';
        })
        .catch(err=>{console.error(err);alert('An error occurred. Please try again later.')});
    }
  </script>
</body>
</html>
